function testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")})),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("popup-form");e.addEventListener("submit",(async function(n){n.preventDefault();let s=formValidate(),o=new FormData(e);o.append("image",t.files[0]),0===s?(e.parentNode.classList.add("_sending"),createRequest(o)):(document.getElementsByClassName("error-message")[0].classList.add("_active"),setTimeout((function(){document.getElementsByClassName("error-message")[0].classList.remove("_active")}),5e3))}));const t=document.getElementById("form-image"),n=document.getElementById("image-preview");t.addEventListener("change",(()=>{!function(e){if(!["image/jpg","image/png","image/gif"].includes(e.type))return alert("разрешены только изображения"),void(t.value="");if(e.size>2097152)return alert("файл должен быть меньше 2мб"),void(t.value="");var s=new FileReader;s.onload=function(e){n.innerHTML=`<img src="${e.target.result}" alt="preview-image">`},s.onerror=function(e){alert("ошибка")},s.readAsDataURL(e)}(t.files[0])}))}));const baseURL="http://localhost:5000/api";async function createRequest(e){let t=await fetch(`${baseURL}/request/create`,{method:"POST",body:e});if(t.ok){let e=await t.json();return alert(e.message),imagePreview.innerHTML(""),form.reset(),form.parentNode.classList.remove("_sending"),e}throw form.parentNode.classList.remove("_sending"),new Error(`${t.status}`)}function formValidate(){let e=0,t=document.querySelectorAll("._required");for(let n=0;n<t.length;n++){const s=t[n];formRemoveError(s),s.classList.contains("_email")?emailTest(s)&&(formAddError(s),e++):("checkbox"===s.getAttribute("type")&&!1===s.checked||""===s.value)&&(formAddError(s),e++)}return e}function formAddError(e){let t=e.parentElement.children;for(let e=0;e<t.length;e++){t[e].classList.add("_error")}}function formRemoveError(e){let t=e.parentElement.children;for(let e=0;e<t.length;e++){t[e].classList.remove("_error")}}function emailTest(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}const popupLinks=document.querySelectorAll(".popup-link"),body=document.querySelector("body"),lockPadding=document.querySelectorAll(".lock-padding");let unlock=!0;const timeout=800;if(popupLinks.length>0)for(let e=0;e<popupLinks.length;e++){const t=popupLinks[e];t.addEventListener("click",(function(e){const n=t.getAttribute("href").replace("#","");popupOpen(document.getElementById(n)),e.preventDefault()}))}const popupCloseIcon=document.querySelectorAll(".close-popup");if(popupCloseIcon.length>0)for(let e=0;e<popupCloseIcon.length;e++){const t=popupCloseIcon[e];t.addEventListener("click",(function(e){popupClose(t.closest(".popup")),e.preventDefault()}))}function popupOpen(e){if(e&&unlock){const t=document.querySelector(".popup.open");t?popupClose(t,!1):bodyLock(),e.classList.add("open"),e.addEventListener("click",(function(e){e.target.closest(".popup__content")||popupClose(e.target.closest(".popup"))}))}}function popupClose(e,t=!0){unlock&&(e.classList.remove("open"),t&&bodyUnlock())}function bodyLock(){const e=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";for(let t=0;t<lockPadding.length;t++){lockPadding[t].style.paddingRight=e}body.style.paddingRight=e,body.classList.add("lock"),unlock=!1,setTimeout((function(){unlock=!0}),800)}function bodyUnlock(){setTimeout((function(){if(lockPadding.length>0)for(let e=0;e<lockPadding.length;e++){lockPadding[e].style.paddingRight="0px"}body.style.paddingRight="0px",body.classList.remove("lock")}),800),unlock=!1,setTimeout((function(){unlock=!0}),800)}let elements=Array.from(document.getElementsByClassName("icon-description"));for(let e=0;e<elements.length;e++)document.getElementsByClassName("icon-description")[e].addEventListener("click",(function(){document.getElementsByClassName("icon-description")[e].classList.contains("_active")?(document.getElementsByClassName("icon-description")[e].classList.remove("_active"),document.getElementsByClassName("description_body")[e].classList.remove("_active")):(document.getElementsByClassName("icon-description")[e].classList.add("_active"),document.getElementsByClassName("description_body")[e].classList.add("_active"))}));function addClass(){document.getElementsByClassName("icon-menu")[0].classList.contains("_active")?(document.getElementsByClassName("icon-menu")[0].classList.remove("_active"),document.getElementsByClassName("_products")[0].classList.remove("_active"),document.getElementsByClassName("menu__body")[0].classList.remove("_active")):(document.getElementsByClassName("icon-menu")[0].classList.add("_active"),document.getElementsByClassName("menu__body")[0].classList.add("_active"),document.getElementsByClassName("_products")[0].classList.add("_active"))}document.getElementsByClassName("icon-menu")[0].addEventListener("click",addClass),document.getElementsByClassName("_products")[0].addEventListener("mousedown",addClass),document.addEventListener("scroll",setInterval((function(){let e=window.pageYOffset||document.documentElement.scrollTop,t=document.getElementsByClassName("_products")[0].classList.contains("_active"),n=document.getElementsByTagName("main")[0].classList.contains("main");e>=100&&(document.getElementById("header").style.background="#F6F6F6",document.getElementsByClassName("header__logo")[0].style.color="#181818",document.getElementsByClassName("header__links")[0].style.color="#181818",document.getElementsByClassName("header__links")[1].style.color="#181818",document.getElementsByClassName("icon-menu")[0].children[0].style.background="#181818",document.getElementsByClassName("icon-menu")[0].children[1].style.background="#181818",document.getElementsByClassName("icon-menu")[0].children[2].style.background="#181818"),100>e&&t&&(document.getElementById("header").style.background="#F6F6F6",document.getElementsByClassName("header__logo")[0].style.color="#181818",document.getElementsByClassName("header__links")[0].style.color="#181818",document.getElementsByClassName("header__links")[1].style.color="#181818",document.getElementsByClassName("icon-menu")[0].children[0].style.background="#181818",document.getElementsByClassName("icon-menu")[0].children[1].style.background="#181818",document.getElementsByClassName("icon-menu")[0].children[2].style.background="#181818"),100>e&&!t&&n&&(document.getElementById("header").style.background="#181818",document.getElementsByClassName("header__logo")[0].style.color="#FFFFFF",document.getElementsByClassName("header__links")[0].style.color="#FFFFFF",document.getElementsByClassName("header__links")[1].style.color="#FFFFFF",document.getElementsByClassName("icon-menu")[0].children[0].style.background="#FFFFFF",document.getElementsByClassName("icon-menu")[0].children[1].style.background="#FFFFFF",document.getElementsByClassName("icon-menu")[0].children[2].style.background="#FFFFFF")})),1e3),document.addEventListener("click",setInterval((function(){let e=document.getElementsByClassName("_products")[0].classList.contains("_active");e&&(document.getElementById("header").style.background="#F6F6F6",document.getElementsByClassName("header__logo")[0].style.color="#181818",document.getElementsByClassName("header__links")[0].style.color="#181818",document.getElementsByClassName("header__links")[1].style.color="#181818"),e||(document.getElementById("header").style.background="#181818",document.getElementsByClassName("header__logo")[0].style.color="#FFFFFF",document.getElementsByClassName("header__links")[0].style.color="#FFFFFF",document.getElementsByClassName("header__links")[1].style.color="#FFFFFF")})),1e3);